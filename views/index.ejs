<%- include('../views/header'); %>       
        
</br>
        <div>
          <h4></h4>
        </div>
        <div class="accordion" id="accordionExample">
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                See all active ministries
              </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
              <div class="accordion-body" id="ministryList">
                <%//console.log(data); %>

                <% 
                for (let i=0; i<data.length;i++){
                  // only display ministry if current
                  if(data[i].is_current){
                %>
                  <%= data[i].ministry_name + ", " + data[i].acronym%> <br/>
                <%
                  }
                } 
                %>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                Change a current ministries' information
              </button>
            </h2>
            <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
              <div class="accordion-body">
                <h4>Please select a ministry to change</h4>
                <div>
<% //TODO: update so only currently active ministries display %>
                  <select name="minToChange" id="minToChange" class="form-control">
                    <option value=""></option>
                    <% for (let i=0; i<data.length;i++){ %>
                      <option value="<%= data[i].ministry_name%>">
                        <%= data[i].ministry_name%>
                      </option>
                    <% } %>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                Add a new ministry
              </button>
            </h2>
            <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
              <div class="accordion-body">

                <form  action="/" method="POST" class="row g-3 needs-validation" id="newMinistryForm">
                  <div class="col-md-4">
                    <label for="ministryName" class="form-label">Ministry Name</label>
                    <input type="text" class="form-control" name= "ministryName" id="ministryName" required>
                  </div>
                  <div class="col-md-4">
                    <label for="effectiveDate" class="form-label">Ministry Effective Date</label>
                    <input type="date" class="form-control" name="effectiveDate" id="effectiveDate" required>
                  </div>
                  <div class="col-md-4">
                    <p>Does this ministry have an assigned acronym?</p>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="acronymChoice" id="acronymYes" value="true" data-toggle-value="revealIfActive" required>
                      <label class="form-check-label" for="acronymYes">Yes</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="acronymChoice" id="acronymNo" value="false" required>
                      <label class="form-check-label" for="acronymNo">No</label>
                    </div>
                  </div>
                  <div id="reveal-if-active">
                    <div class="col-md-6">
                      <label for="acronym" class="form-label">Acronym</label>
                      <input type="text" class="form-control" name= "acronym" id="acronym" required>
                    </div>
                    <div class="col-md-6">
                      <label for="acronymDate" class="form-label">Acronym Effective Date</label>
                      <input type="date" class="form-control" name="acronymDate" id="acronymDate" required>
                    </div>
                  </div>
                  <div class="col-12">
                    <button class="btn btn-primary" type="submit">Submit form</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
<%- include('../views/footer'); %>
